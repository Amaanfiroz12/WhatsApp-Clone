(this["webpackJsonpwhatsapp-web-clone"]=this["webpackJsonpwhatsapp-web-clone"]||[]).push([[0],{108:function(e,t,a){},109:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(22),l=a.n(o),r=(a(68),a(7)),i=(a(69),a(129)),s=a(121),m=a(130),u=a(52),d=a.n(u),h=a(53),p=a.n(h),E=a(54),f=a.n(E),v=(a(70),a(71),a(37)),g=a.n(v),b=(a(72),a(73),g.a.initializeApp({apiKey:"AIzaSyB0SPZkU2yqwoLnAmPCHpUQb0cWYnj6kag",authDomain:"whatsapp-clone-629ef.firebaseapp.com",projectId:"whatsapp-clone-629ef",storageBucket:"whatsapp-clone-629ef.appspot.com",messagingSenderId:"953649223438",appId:"1:953649223438:web:30365f673a912168e2a95f",measurementId:"G-7WK0B3RDQD"}).firestore()),_=g.a.auth(),w=new g.a.auth.GoogleAuthProvider,j=b,C=a(26);var N=function(e){var t,a,o=e.id,l=e.name,s=e.addNewChat,m=Object(n.useState)(""),u=Object(r.a)(m,2),d=u[0],h=u[1],p=Object(n.useState)(""),E=Object(r.a)(p,2),f=E[0],v=E[1];return Object(n.useEffect)((function(){h(Math.floor(5e4*Math.random()))}),[]),Object(n.useEffect)((function(){o&&j.collection("Rooms").doc(o).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){v(e.docs.map((function(e){return e.data()})))}))}),[o]),s?c.a.createElement("div",{onClick:function(){var e=prompt("Please enter name for group");e&&j.collection("Rooms").add({name:e})},className:"sidebarChat",id:"add__chat"},c.a.createElement("h2",null,"+ Add new Group")):c.a.createElement(C.Link,{to:"/rooms/".concat(o)},c.a.createElement("div",{className:"sidebarChat"},c.a.createElement(i.a,{src:"https://avatars.dicebear.com/api/human/".concat(d,".svg")}),c.a.createElement("div",{className:"sidebarChat__info"},c.a.createElement("h2",null,l),c.a.createElement("p",null,null===(t=f[0])||void 0===t?void 0:t.message.substring(0,15),(null===(a=f[0])||void 0===a?void 0:a.message.length)>15&&"..."))))},O=a(122),k=Object(n.createContext)(),y=function(e){var t=e.reducer,a=e.initialState,o=e.children;return c.a.createElement(k.Provider,{value:Object(n.useReducer)(t,a)},o)},S=function(){return Object(n.useContext)(k)},R=a(43),A="SET_USER",W=function(e,t){switch(t.type){case A:return Object(R.a)(Object(R.a)({},e),{},{user:t.user});default:return e}};var L=function(e){var t=e.hide,a=Object(n.useState)([]),o=Object(r.a)(a,2),l=o[0],u=o[1],h=S(),E=Object(r.a)(h,2),v=E[0].user,g=E[1],b=Object(n.useState)(""),w=Object(r.a)(b,2),C=w[0],k=w[1],y=Object(n.useState)(!1),R=Object(r.a)(y,2),W=R[0],L=R[1];return Object(n.useEffect)((function(){var e=j.collection("Rooms").onSnapshot((function(e){return u(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}));return function(){e()}}),[]),c.a.createElement("div",{className:t?"sidebar side__bar":"sidebar"},c.a.createElement("div",{className:"sidebar__header"},c.a.createElement(i.a,{src:null===v||void 0===v?void 0:v.photoURL}),c.a.createElement("div",{className:"sidebar__headerRight"},c.a.createElement(s.a,{onClick:function(){return alert("Not added this functionality.\nClick on three dots to logout and add new group.")}},c.a.createElement(d.a,null)),c.a.createElement(s.a,null,c.a.createElement(p.a,null)),c.a.createElement(m.a,{onClickAway:function(){return L(!1)}},c.a.createElement("div",{className:"dropdown"},c.a.createElement(s.a,{onClick:function(){L(!W)}},c.a.createElement(f.a,null)),c.a.createElement("div",{className:W?"dropdown__list":"dropdown__list hide"},c.a.createElement("ul",null,c.a.createElement("li",{onClick:function(){L(!W);var e=prompt("Please enter name for group");e&&j.collection("Rooms").add({name:e})}},"Add Group"),c.a.createElement("li",{onClick:function(){_.signOut().then((function(){g({type:A,user:null}),L(!W)})).catch((function(e){alert(e.message)}))}},"Log Out"),c.a.createElement("li",{onClick:function(){return alert("Not added this functionality.\nTry Logout and add group options")}},"Help"))))))),c.a.createElement("div",{className:"sidebar__search"},c.a.createElement("div",{className:"sidebar__searchContainer"},c.a.createElement(O.a,null),c.a.createElement("input",{placeholder:"Search chat",type:"text",value:C,onChange:function(e){k(e.target.value)}}))),c.a.createElement("div",{className:"sidebar__chats"},c.a.createElement(N,{addNewChat:!0}),l.map((function(e){return e.data.name.toLowerCase().includes(C.toLowerCase())||""===C?c.a.createElement(N,{key:e.id,id:e.id,name:e.data.name}):c.a.createElement(c.a.Fragment,null)}))))},I=(a(80),a(123)),D=a(124),x=a(125),B=a(126),P=a(127),T=a(55),M=a.n(T);var G=function(e){var t,a,o=e.hide,l=e.removeRoom,u=S(),d=Object(r.a)(u,2),h=d[0].user,p=(d[1],Object(n.useState)("")),E=Object(r.a)(p,2),f=E[0],v=E[1],g=Object(n.useState)(""),b=Object(r.a)(g,2),_=b[0],w=b[1],N=Object(C.useParams)().roomId,k=Object(n.useState)(""),y=Object(r.a)(k,2),R=y[0],A=y[1],W=Object(n.useState)([]),L=Object(r.a)(W,2),T=L[0],G=L[1],U=Object(n.useState)(!1),z=Object(r.a)(U,2),F=z[0],q=z[1];return Object(n.useEffect)((function(){q(!1),v(Math.floor(5e4*Math.random())),N&&(j.collection("Rooms").doc(N).onSnapshot((function(e){e.data()&&A(e.data().name)})),j.collection("Rooms").doc(N).collection("messages").orderBy("timestamp","asc").onSnapshot((function(e){G(e.docs.map((function(e){return e.data()})))})))}),[N]),Object(n.useEffect)((function(){v(Math.floor(5e4*Math.random()))}),[]),c.a.createElement("div",{className:o?"chat Chat":"chat"},c.a.createElement("div",{className:"chat__header"},c.a.createElement(C.Link,{to:"/"},c.a.createElement(s.a,null,c.a.createElement(I.a,null))),c.a.createElement(i.a,{src:"https://avatars.dicebear.com/api/human/".concat(f,".svg")}),c.a.createElement("div",{className:"chat__headerInfo"},c.a.createElement("h3",null,R),c.a.createElement("p",null,0!==T.length?"Last seen at "+new Date(null===(t=T[T.length-1])||void 0===t||null===(a=t.timestamp)||void 0===a?void 0:a.toDate()).toUTCString():"")),c.a.createElement("div",{className:"chat__headerRight"},c.a.createElement(s.a,{onClick:function(){return alert("Not added this functionality.\nClick on three dots to delete chats.")}},c.a.createElement(O.a,null)),c.a.createElement(m.a,{onClickAway:function(){return q(!1)}},c.a.createElement("div",{className:"dropdown"},c.a.createElement(s.a,{onClick:function(){q(!F)}},c.a.createElement(D.a,null)),c.a.createElement("div",{className:F?"dropdown__list":"dropdown__list hide"},c.a.createElement("ul",null,c.a.createElement(C.Link,{to:"/"},c.a.createElement("li",{onClick:function(){l(N)}},"Delete Chat")))))))),c.a.createElement("div",{className:"chat__body"},T.map((function(e){var t;return c.a.createElement("div",{key:e.timestamp},c.a.createElement("p",{className:"chat__message ".concat(e.email===h.email&&"chat__receiver")},c.a.createElement("span",{className:"chat__name"},e.name),e.message,c.a.createElement("span",{className:"chat__timestamp"},new Date(null===(t=e.timestamp)||void 0===t?void 0:t.toDate()).toUTCString())))}))),c.a.createElement("div",{className:"chat__footer"},c.a.createElement(s.a,{onClick:function(){return alert("Not added this functionality.\nClick on three dots on top right to delete chats.")}},c.a.createElement(x.a,null)),c.a.createElement(s.a,{className:"attach__file",onClick:function(){return alert("Not added this functionality.\nClick on three dots on top right to delete chats.")}},c.a.createElement(B.a,null)),c.a.createElement("form",null,c.a.createElement("input",{required:!0,type:"text",onChange:function(e){return w(e.target.value)},value:_,placeholder:"Type a message"}),c.a.createElement("button",{type:"submit",onClick:function(e){e.preventDefault(),_?(j.collection("Rooms").doc(N).collection("messages").add({message:_,name:h.displayName,email:h.email,timestamp:M.a.firestore.FieldValue.serverTimestamp()}),w("")):alert("Type something first")}},"Send a message")),c.a.createElement(s.a,{onClick:function(){return alert("Not added this functionality.\nClick on three dots on top right to delete chats.")}},c.a.createElement(P.a,null))))},U=a(57),z=a(6),F=a(128);a(88);var q=function(){var e=S(),t=Object(r.a)(e,2),a=(t[0].user,t[1]);return c.a.createElement("div",{className:"login"},c.a.createElement("div",{className:"login__container"},c.a.createElement("img",{src:"https://www.logo.wine/a/logo/WhatsApp/WhatsApp-Logo.wine.svg",alt:""}),c.a.createElement("div",{className:"login__text"},c.a.createElement("h1",null,"Sign in to WhatsApp")),c.a.createElement(F.a,{onClick:function(){_.signInWithPopup(w).then((function(e){a({type:A,user:e.user})})).catch((function(e){alert(e.message)}))}},"Sign In with Google")))},H=a(56),J=a.n(H);a(108);var K=function(){return c.a.createElement("div",{className:"loader"},c.a.createElement(J.a,{type:"TailSpin",color:"green",height:120,width:120}))};var Q=function(){var e=S(),t=Object(r.a)(e,2),a=t[0].user,o=t[1],l=Object(n.useState)(!0),i=Object(r.a)(l,2),s=i[0],m=i[1];Object(n.useEffect)((function(){m(!0);var e=_.onAuthStateChanged((function(e){m(!1),o(e?{type:A,user:e}:{type:A,user:null})}));return function(){return e()}}),[o]);var u=function(e){j.collection("Rooms").doc(e).delete().then((function(){alert("Group Deleted")}))};return s?c.a.createElement(K,null):c.a.createElement("div",{className:"app"},a?c.a.createElement("div",{className:"app__body"},c.a.createElement(U.a,{basename:"/WhatsApp-Clone"},c.a.createElement(z.Switch,null,c.a.createElement(z.Route,{path:"/",exact:!0},c.a.createElement(L,{hide:!1}),c.a.createElement(G,{hide:!0,removeRoom:u}),c.a.createElement("div",{className:"project__info"},c.a.createElement("img",{src:"https://www.logo.wine/a/logo/WhatsApp/WhatsApp-Logo.wine.svg",alt:""}),c.a.createElement("div",{className:"text"},c.a.createElement("h1",null,"WhatsApp Web Clone"),c.a.createElement("p",null,"- By Amaan Firoz")))),c.a.createElement(z.Route,{path:"/rooms/:roomId"},c.a.createElement(L,{hide:!0}),c.a.createElement(G,{hide:!1,removeRoom:u}))))):c.a.createElement(q,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(y,{initialState:{user:null},reducer:W},c.a.createElement(Q,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},63:function(e,t,a){e.exports=a(109)},68:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},80:function(e,t,a){},88:function(e,t,a){}},[[63,1,2]]]);
//# sourceMappingURL=main.d8cce4c6.chunk.js.map